<app-base-userpage>
    <div settingsButton>
        <p-button (click)="showProfileSettings()" icon="fas fa-cog" style="float:right"></p-button>
    </div>
    <div settingsDialog>
        <p-dialog header="Profile settings" [(visible)]="displayProfileSettings" [width]="600" [draggable]="false"
            [dismissableMask]="true" [modal]="true" [responsive]="true" [resizable]="false">
            <app-settings (onAvatarChange)="updateAvatar($event)" (onBioChange)="updateBio($event)" [user]="user"
                [newBio]="user.bio"></app-settings>
        </p-dialog>
    </div>
    <div say>
        <input [(ngModel)]="newPost.message" class="post-message" name="text" type="text" pInputText placeholder="Say something..."
            autocomplete="off" style="width: 35%;">
        <p-button (click)="onSay()" icon="fa fa-comment" style="width:70px;"></p-button>
    </div>
    <div editPost>
        <p-dataView [value]="posts.reverse()">
            <ng-template let-post pTemplate="listItem">
                <div class="ui-g" style="padding: 0 10px; border-bottom: 1px solid #d9d9d9">
                    <div class="ui-g-12 ui-md-12 post-container">
                        <div class="ui-g-12">
                            <p style="margin:0px;">
                                <button pButton style="float: right;" icon="fas fa-edit" (click)="changePost(post.id)"></button>
                            </p>
                            <div *ngIf="!post.is_changing">
                                <p><textarea class="post-text" readonly style="color: black">{{post.message}}</textarea></p>
                            </div>
                            <div *ngIf="post.is_changing">
                                <p><textarea class="post-text" [(ngModel)]="editedPostMessage" style="color: purple">{{editedPostMessage}}</textarea></p>
                            </div>
                            <div>
                                <div *ngIf="post.is_changing">
                                    <button pButton style="width: 150px; float: right;" icon="fas fa-times" (click)="cancelEditPost();"></button>
                                    <button pButton style="width: 150px; float: right; margin-right: 10px;" icon="fas fa-check"
                                        (click)="submitEditPost();"></button>
                                </div>
                            </div>
                            <p style="color: black;">{{post.post_date | date: 'dd/MM/yyyy HH:mm'}}</p>
                        </div>
                    </div>
                </div>
            </ng-template>
        </p-dataView>
    </div>
</app-base-userpage>